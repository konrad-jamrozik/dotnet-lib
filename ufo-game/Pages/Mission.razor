@page "/mission"
@using UfoGame.Components
@using UfoGame.Cards
@using UfoGame.Model
@using UfoGame.ViewModel
@inject ViewStateRefresh ViewStateRefresh
@inject Agents Agents

@* kja WIP: Mission.razor *@
<PageTitle>Mission</PageTitle>

<h1>Mission</h1>

<div class="list-group">
    @{
        var indexes = Enumerable.Range(0, 3).Count();
        for (int i = 0; i < indexes; i++)
        {
            @* kja use SASS variables (or maybe just CSS variables is enough?) to replace py-1, px-2
               https://getbootstrap.com/docs/5.3/components/accordion/#sass-variables
               https://getbootstrap.com/docs/5.3/customize/css-variables/
               https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_custom_properties *@
            <div class="list-group-item container py-1 px-2">
                <div class="row">
                    <div class="col">
                        <div class="float-end ms-1">
                            <button class="btn btn-secondary py-0" type="button"
                                    data-bs-toggle="collapse" data-bs-target="#itemDetails_@i">
                                i
                            </button>
                        </div>
                        @i Agent 0123456789 0123456789 suffered 123 damage from enemy 01234567890123456789. Agent is incapacitated.
                    </div>
                    
                </div>
                <div class="row collapse px-0" id="itemDetails_@i">
                    <div class="col">
                        Details of item @i Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut
                        labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco
                    </div>
                </div>
            </div>
        }
    }
</div>

@code
{
    protected override void OnInitialized()
    {
        base.OnInitialized();
        ViewStateRefresh.Event += StateHasChanged;
    }
}
