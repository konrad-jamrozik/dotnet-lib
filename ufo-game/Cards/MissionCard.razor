@using UfoGame.Cards.Components
@inject Model.Game Game;

<Card Title="Mission">
    <CardDataRow Text="Available in" 
                 Value="@Game.PendingMission.AvailableIn" 
                 Enabled="@(!Game.PendingMission.CurrentlyAvailable)" />
    <CardDataRow Text="Expires in" 
                 Value="@Game.PendingMission.ExpiresIn"
                 Enabled="@Game.PendingMission.CurrentlyAvailable"/>
    <CardDataRow Text="Enemy faction"
                 Value="@Game.PendingMission.Faction.Name"
                 Enabled="@Game.PendingMission.CurrentlyAvailable" />
    <CardDataRow Text="Money reward"
                 Value="@("$"+Game.PendingMission.MoneyReward)"
                 Enabled="@Game.PendingMission.CurrentlyAvailable" />
    <CardDataRow Text="Enemy power"
                 Value="@Game.PendingMission.EnemyPower"
                 Enabled="@Game.PendingMission.CurrentlyAvailable" />
    <CardDataRow Text="Our power"
                 Value="@Game.PendingMission.OurPower"
                 Enabled="@Game.PendingMission.CurrentlyAvailable" />
    <CardDataRow Text="Mission success %"
                 Value="@(Game.PendingMission.SuccessChance + "%")"
                 Enabled="@Game.PendingMission.CurrentlyAvailable" />
    <CardDataRow Text="Soldier survival %"
                 Value="@(Game.PendingMission.SoldierSurvivalChance + "%")"
                 Enabled="@Game.PendingMission.CurrentlyAvailable" />
    <CardDataRow Text="Soldiers to send" 
                 Value="@Game.MissionPrep.SoldiersToSend"
                 Enabled="@Game.PendingMission.CurrentlyAvailable" />
    <div class="row align-items-center">
        <CardButton OnClick="Game.LaunchMission"
                    Enabled="Game.PendingMission.CanLaunchMission()">
            Launch mission with @Game.MissionPrep.SoldiersToSend soldiers
        </CardButton>
        <CardUpDownArrows OnClickUp="Game.MissionPrep.IncrementSoldiersToSend"
                          OnClickDown="Game.MissionPrep.DecrementSoldiersToSend"
                          EnabledUp="Game.PendingMission.CanLaunchMission(Game.MissionPrep.SoldiersToSend + 1)"
                          EnabledDown="Game.MissionPrep.SoldiersToSend >= 2" />
    </div>
    <CardInput @bind-Input="@Game.MissionPrep.SoldiersToSend"
               MinValue="1"
               MaxValue="@Game.Staff.CurrentSoldiers"
               Value="@Game.MissionPrep.SoldiersToSend"
               Enabled="@(Game.MissionPrep.SoldiersToSend >= 1)" />
    <div class="row">
        <div class="col">Last mission debriefing:</div>
    </div>
    <div class="row">
        <div class="col">@Game.Archive.LastMissionReport</div>
    </div>
</Card>